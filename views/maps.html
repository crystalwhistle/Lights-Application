<!DOCTYPE html>
<link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Exo:400,800' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Raleway:100,300' rel='stylesheet' type='text/css'>
<html>

<head>
</head>

<body data-spy="scroll" data-target=".navbar" data-offset="50">
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">ITZ LIT</a>
            </div>
            <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav">
                    <li><a href="#main">MAP</a></li>
                    <li><a href="#moreInfo">MORE INFO</a></li>
                    <li><a href="#forum">FORUM</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="#"><span class="glyphicon glyphicon-log-out"></span> Logout</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <div id="main" class="row" style="padding-top: 50px">
        <div id="sidebar">
            <div>
                <center>
                    <h1 class="region-title">YOUR SAFEST TRIP<a href="#myModal" data-toggle="modal"><i class="fa fa-info-circle" aria-hidden="true"></i></a> </h1>
                    <!-- Modal -->
                    <div id="myModal" class="modal fade" role="dialog">
                        <div class="modal-dialog">
                            <!-- Modal content-->
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    <h4 class="modal-title">MORE INFO</h4>
                                </div>
                                <div class="modal-body">
                                    <p>Your route is calculated based on street light and crime data. Blah blah blah.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- New Post Modal -->
                    <div id="newPostModal" class="modal fade" role="dialog">
                        <div class="modal-dialog">
                            <!-- Modal content-->
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    <h4 class="modal-title">Create a New Post</h4>
                                </div>
                                <div class="modal-body">
                                  <form id="send_post">
                                    <div id="submitModal" class="modal">
                                        <div class="modal-content">
                                            <h4 align="left">Submit Post?</h4>
                                            <p id="postMessage">Are you sure you want to post: </p>
                                        </div>
                                        <div class="modal-footer">
                                            <input class="modal-action modal-close btn blue darken-3 right subBtn" type="submit" value="Post" rel="nofollow" style="margin-left:20px">
                                            <a class="modal-action modal-close btn grey lighten-1 right cancelBtn">CANCEL</a>
                                        </div>
                                    </div>
                                    <div id="errModal" class="modal">
                                        <div class="modal-footer">
                                            <a class="modal-action modal-close btn blue darken-3 right" id="okBtn">OK</a>
                                        </div>
                                    </div>
                                    <div id="errModalmsg" class="modal">
                                        <div class="modal-content">
                                            <h4 align="left">Empty post.</h4>
                                            <p>You must enter a message in order to post.</p>
                                        </div>
                                        <div class="modal-footer">
                                            <a class="modal-action modal-close btn blue darken-3 right" id="okBtn2">OK</a>
                                        </div>
                                    </div>
                                  <div class="newPostContainer">
                                    <textarea class="white-text" id="message_content" placeholder="What's happening on your route?" style="background: url('{{profPic}}') no-repeat scroll 0px -1px; padding-left:60px" autocomplete="off" required></textarea>
                                  </div>
                                  </form>
                                  <br>
                                  <Button id="submitnewpost" class="btn-large blue darken-4">Create Post</Button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Comments Modal -->
                    <div id="commentsModal" class="modal fade" role="dialog">
                        <div class="modal-dialog">
                            <!-- Modal content-->
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    <h4 class="modal-title">Comments</h4>
                                </div>
                                <div class="modal-body">
                                    <p>Your route is calculated based on street light and crime data. Blah blah blah.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                </center>
                <div style="margin-left:40px">
                    <p>Starting point:</p>
                    <p id="startingp"></p>
                    <p>Ending point:</p>
                    <p id="endingp"></p>
                </div>
                <center>
                    <h2 id="uberTypeSelected" class="uber-selection">ROUTE</h2>
                </center>
                <div style="margin-left:40px">
                    <div id="routeInfo">
                    </div>
                </div>
            </div>
            <br>
            <ul id="rankings" class="list-group"></ul>
        </div>
        <div id="map"></div>
        <div id="spinner" class="spinner"></div>
    </div>
    <div id="moreInfo">
        <div class="container" style="padding-top: 5%">
            <div class="row">
                <div class="col-sm-12 text-center">
                    <h1 class="text-center" style="font-size:80px">MORE INFORMATION</h1>
                    <!-- <h3 class="landing-description">Graphs and other cool stuff!!!</h3>
                    <hr width="60%">
                    <p class="app-description">LET'S GET VISUAL!</p> -->
                    <center>
                        <div id="stackBarChart"></div>
                    </center>
                </div>
            </div>
        </div>
    </div>
    <div id="d3">
        <svg class="chart">
        </svg>
    </div>
    <div id="forum" class="text-center">
        <div class="container" style="padding-top: 5%">
            <div class="row">
                <div class="col-sm-12 text-center">
                    <h1 class="text-center" style="font-size:80px">FORUM</h1>
                    <h3 class="landing-description">Wao we're gonna have people talk to each other</h3>
                    <hr width="60%">
                    <a href="#newPostModal" data-toggle="modal"><i class="fa fa-pencil-square-o fa-2x" aria-hidden="true" style="vertical-align: middle; padding-right: 5px;"></i><span>Post</span></a>
                </div>
            </div>
        </div>

        <section>

          <div id="inner">
              <div id="newMessages" class="row center-block"></div>
              <div id="messages" class="posts">
                  {{#each newsfeed}}
                  <div class="row center-block" id="post{{_id}}">
                      <div class="col s10 offset-s1">
                          <div class="card white">
                              <div class="card-content black-text">
                                  <img style="vertical-align:middle;" src="{{user.photo}}" />
                                  <b>  {{user.displayName}}</b><span class="username"> posted on {{posted}}:</p></span>
                                  <div class="card-title">
                                      <p>{{message}}</p>
                                  </div>
                              </div>
                              <div class="card-action">
                                  <a href="/comments?postID={{_id}}" class="btn blue darken-3 left comments" postID="{{_id}}" value="{{numOfComments}}"></a>
                                  <div class="delete" sameUser="{{sameUser}}" postID="{{_id}}">
                                  </div>
                              </div>
                              <br />
                          </div>
                      </div>
                  </div>
                  <div id="modal{{_id}}" class="modal">
                      <div class="modal-content">
                          <h4>Delete post?</h4>
                          <p>Are you sure you want to delete this post? Click "DELETE" below to delete this post or cancel to go back.</p>
                      </div>
                      <div class="modal-footer">
                          <!--a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Agree</a-->
                          <a class="modal-action modal-close btn blue darken-3 right delBtn" postID="{{_id}}" onclick="deletePost('{{_id}}')" rel="nofollow" style="margin-left:20px">DELETE</a>&nbsp;&nbsp;&nbsp;
                          <a class="modal-action modal-close btn grey lighten-1 right">CANCEL</a>
                      </div>
                  </div>
                  {{/each}}
              </div>
              <div id="LoadMore" class="row center-block">
              </div>
          </div>
        </section>

    </div>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.js"></script>
    <script src="/js/index.js"></script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCrxU3ewOQTPgI7Pf3wvcDZp-N8hv3cYnU
        &libraries=geometry,visualization&callback=initMap"></script>
    <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="/js/spin.js"></script>
    <script src="/js/barchart.js"></script>
    <script src="./js/socket.io.min.js"></script>
    <script src="./js/newPost.js"></script>
    <script src="./js/chatbox.js"></script>

    <!-- <script src="./js/comment.js"></script> -->


</body>

</html>
